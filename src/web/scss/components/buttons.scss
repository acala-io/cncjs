/*
 * Buttons.
 *
 * Usage:
 *
 * <a href="#" class="button button--large">
 *     Save
 * </a>
 *
 * <button class="button">
 *     Save
 * </button>
 *
 * <div class="split-button">
 *     <button class="button">
 *         Save
 *     </button>
 *     <button class="button">
 *         Save as draft
 *     </button>
 * </div>
 */

$visualZHeight: 1.5px;

/*
 * 1 - Add shadow at bottom of button to create spatial depth and make button stand out
 * 2 - Always vertically center buttons with other elements
 */
.button,
a.button,
%button {
    @include truncate-text;

    appearance: none; /* stylelint-disable-line plugin/no-unsupported-browser-features */
    background: $clickable;
    border-radius: $border-radius--large;
    border: 0;
    box-shadow: inset -1px (-$visualZHeight) 0 hsla(0, 0%, 0%, 0.23); /* 1 */
    color: $text--inverse;
    cursor: pointer;
    display: inline-block;
    font: inherit;
    font-weight: normal;
    padding: $inuit-global-spacing-unit;
    text-align: center;
    text-shadow: 0 -1px 0 darken($clickable, 13);
    transition: background, color $transition-time--slow;
    user-select: none;
    vertical-align: middle; /* 2 */

    &:hover,
    &:active,
    &:focus {
        outline: none;
    }

    &:hover {
        background: $clickable--highlight;
        color: $text--inverse;
    }

    &:active,
    &:focus {
        outline: none; /* stylelint-disable-line plugin/no-unsupported-browser-features */
    }

    /*
     * Visually push button down to surface by
     * 1 - Removing shadow that creates 3d effect -> appears flat
     * 2 - Adding margin on top of button -> moves button down
     * 3 - Reducing padding-bottom of button -> reduces height of button
     */
    &:active:not(.is-disabled) {
        box-shadow: inset 0 0 0 1px hsla(0, 0%, 0%, 0.08); /* 1 */
        margin-top: $visualZHeight; /* 2 */
        padding-bottom: $inuit-global-spacing-unit - $visualZHeight; /* 3 */
    }

    /*
     * 1 - Equalize spacing around icon
     */
    > .icon {
        display: inline-block;
        fill: $text--inverse;
        filter: drop-shadow(
            0 -1px 0 darken($clickable, 13)
        ); /* stylelint-disable-line plugin/no-unsupported-browser-features */
        margin-left: -$inuit-global-spacing-unit-tiny; /* 1 */
        margin-right: $inuit-global-spacing-unit-small; /* 1 */
        position: relative;
        vertical-align: middle;
    }

    &[disabled],
    &.is-disabled,
    &.is-disabled:hover {
        background: $background;
        border-color: $transparent darken($background, 13) darken($background, 13);
        cursor: not-allowed; /* stylelint-disable-line plugin/no-unsupported-browser-features */
        text-shadow: 0 -1px 0 darken($background, 13);

        .icon {
            filter: drop-shadow(
                0 -1px 0 darken($background, 13)
            ); /* stylelint-disable-line plugin/no-unsupported-browser-features */
        }
    }
}

// Variants ------------------------------------------------------------------------------------------------------------
.button--large.button {
    font-size: $font-size--large;
    font-weight: normal;
    padding-bottom: $inuit-global-spacing-unit-small;
    padding-top: $inuit-global-spacing-unit-small;

    &:active:not(.is-disabled) {
        padding-bottom: $inuit-global-spacing-unit-small - $visualZHeight; /* 3 */
    }
}

.button--huge.button {
    font-size: $font-size--large;
    padding: $inuit-global-spacing-unit $inuit-global-spacing-unit-large;

    &:active:not(.is-disabled) {
        padding-bottom: $inuit-global-spacing-unit - $visualZHeight; /* 3 */
    }
}

.button--full-width.button {
    width: 100%;
}

.button--danger.button {
    background: $danger;
    border-color: darken($danger, 21);
    text-shadow: 0 -1px 0 darken($danger, 21);

    &:hover {
        background: lighten($danger, 3);
    }

    > .icon {
        filter: drop-shadow(
            0 -1px 0 darken($danger, 25)
        ); /* stylelint-disable-line plugin/no-unsupported-browser-features */
    }
}

@mixin button {
    @extend %button;
}
